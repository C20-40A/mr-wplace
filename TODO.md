# メイン

- 描画カウントおかしい
- 画像の事前カウント動いてないかも
- 並列になったから、アイコンの並びが不安定だ
- 登録済みの画像を描画 OFF にするとプログレスバーなどが表示されなくなる
- データセーバー ON でも、レンダリングの更新はできるようにする
- 初回起動が遅い
- データセーバーの説明テキストほしい
- 友人帳
- 画像処理を Web Worker で並列実行
- 追加したばかりの画像、描画モードがドットスタートになっている。現在の描画モードにしたい
- テーマ変更したらリロードしたほうがいいかも
- 選択したテキスト storage 保存のほうがやっぱいいかも
- ブックマークの export とかに不要なのあるかも
- GalleryItem の dataUrl 取得重いからなんとかしたい
- 色の変換方式複数試したい。
- GalleryStorage の getAll()の確認. 重くないか

- 画像編集で拡大はやはりできたほうがいい
- theme: 'custom-winter'-> 'night' にすれば一発で切り替わるが、動的には切り替わらなそう
- 画像編集中だと、画像の追加ができない(画像編集キャンセルしたい)
- 進捗を描画の UI に表示したい
- 高速化のため、いくつかの map を record にする
- i18n の不足部分
- タイル一覧もタグほしい
- なんかチャージの残りが表示されない場合あるかも

# バグ

- ダークテーマ → リロード(地図テーマ変更される)→ ライトモード（地図が変な感じになる）
- 以前タイルが描画されないことがあった。removePreparedOverlayImageByKey 　が not defined が原因だったが、ちゃんと直っているだろうか
- tile 描画が inject 送信で少し遅くなったかも？
- 一部の場所がブルーマーブルと併用しているとマス目がかなり小さく別の場所に描画される
- ギャラリーから画像を削除したとき、空のアイテムが残る
- /me がないときは所持色のフィルターが効いていない
- brave でエラーになる？
- データセーバーが ON のとき表示されないタイルがあるかも
- 何らかのタイミングで wplace が別の部分の tile を fetch してしまって、現在地点付近の tile が取得されないことがある?

# マイナー

- imagure に up して copy
- 描画を最小限 option できるようにする(更新停止,背景比較 OFF,フィルターなし)
- 画像にこそ色統計ほしい
- 距離を計測する機能
- タイルの GoogleDrive とのリンク
- フォント追加したい
- auto color picker は space を押下しても ok にする？
- データセーバー ON のときでも、paint 直後に取得したら楽かも
- ◎C.座標入力をクリック指定可能に（優先度：低、追加工数中程度を想定） Skrik Marble と同様に、座標をクリックで指定できればうれしいです。が、頻度は高くないので優先度は低めです。
- カラー統計の挙動 - いままで取得したタイルでカウントしているが「最も近いテンプレート」の統計のみでよいかもしれん.map instance で center とかとる？
- タイル分析に、現在タイルとの比較/変化率がほしいところ
- GPU レンダリング失敗したら、alert 出して、CPU の config に切り替えて保存する
- やっぱ WebGPU サポートしたい
- アラームの通知しきい値を任意にしたい
- メディアクエリの function を util に切り出す
- グレー部分が何塗っても間違い判定される可能性ない？
- タイルやブックマークにタグあってもいいかも
- ギャラリーの画像ミスって押すとダルい。以前の位置とかあってもいいかも
- bookmark の date の保存形式がまさかの string(変換後)なのなんとかしたい
- 直接 map の canvas をいじりたい
  - リアルタイムにスムーズな描画ができる
  - スポイト中の色をリアルタイムで強調表示できそう
  - スポイト中の色以外を半透明にするとか
- テキストの色変更
- ImageGridComponent もう分けていいんじゃね
- タイルの差分率を表示
- タイルの合計容量
- タイルをまとめて export
- 5x5 の pixel 対応して、ピクセルを枠で囲うことを可能にする
- filter 適用中に描画中モーダル表示
- ui.ts 系は functional のほうがいいかもしれない
- Transparent の色が、既存の色を上書きできない
  - 透明についても、テンプレート対象にするオプションつける？
- ギャラリーから、画像に移動したとき、即座に描画されない？
- 文字入力モーダルを初期で選択状態に変更
- UI の描画方法を統合する
- 大きな範囲の tile が異なると alert を出す
- スナップショットを削除しても、タイルの設定は残る
- 描画が重複しているときアラート。フィルターがすべて OFF になっているとアラート
- ギャラリー画像の入れ替えもあってもいいかも
- Current Charges が少しだけ手持ちのものとずれている問題
- font で Papyrus と wingdings 対応
  - open font でいいのが少ない
  - https://fontstruct.com/gallery/tag/4488/Wingdings
  - noto emoji もやりたい
- 道路引くツール
- PC のブックマーク一覧を 4 行ぐらいにしたい。が、その tailwind のメディアクエリがないから、設定が面倒
- exclude_globs にメインのもの以外含める？
  - all_frames false (デフォルト)系は false．まあデフォルトが false だから不要か
- dark/light テーマの i18n 不要になった

# DONE v1.10.1

- paint するときは、該当タイルのキャッシュを削除
- 通知しきい値のテキストダークテーマ対応
- 描画しきれていない残りのピクセルがどこにあるかわかりにくい。複雑な画像の場合。未配置のみ表示をつける
- ギャラリーの並び替え
- タイル一覧並び替え
- ギャラリーの画像のサムネイル対応
- 画像選択での dark theme 対応
- modal の中身が destroy されない問題の修正
- ドラッグアンドドロップでの画像変更がうまくいかない
- tag フィルターボタン
- 画像編集画面のモバイル UI の修正
- paint に、spoit した色のみ表示するよう、フィルターを自動操作するボタンがほしい。例えば赤を選択中は、赤だけ enable/他は disable になる
- ブックマークのタグの並びをアクセス順にする
- シェア画面の UI 変更
- 座標の横にコピーアイコン
- 特定のタグの 編集
- 特定のタグの export する
- ダークテーマになったときの視認性悪い問題
- ダークモードのとき、UI もダークモードにする
- テキスト移動のダブルクリックでも選択状態にならないように
- キャッシュの設定を追加
- タイルキャッシュ データセーバーの右上に settings 置く
- /me が取れないパターンが多すぎる
- シャープネス機能
- ギャラリーの並び替え変更

# DONE v1.9.1

- 画像の移動ボタンが１度しか動作しない
- 描画後、データセーバーボタンが off にできない？
- レイヤー未配置にしても描画が残る
- 画像削除したとき、描画も消す
- 同一のデザインで縮尺だけが違うものや、全体アーカイブなどはプレビューで見分けがつかない(つきにくい)ので、読み込ませたテンプレートに名前をつけられるようにしたい
- 画像編集画面で、画像を入れ替えられるようにする(そうすると、編集から画像を入れ替えられるようになる)
- フィルターするとカウントがリセットされる問題の修正
- 描画中ローダーを汎用的に
- text 移動ができない
- 未配置画像のエイリアス off にする pixelated
- k8x12 が消えていた問題の修正
- inject も try catch しないと失敗したとき終わる
- 矢印移動すると、なぜか新規追加ボタン消える
- paint パレットの toggle
- firefox 対応
- 統計処理はできているが、進捗がでてこない

# DONE v1.8.3

- 描画の統計ができていない → 統計の事前計算機能を実装（画像追加時とカラーフィルター変更時に統計を自動計算）

# DONE v1.8.2

- wplace-studio-snapshot-tmp 消した

# DONE v1.8.1

- src/inject/map-instance.ts で、map instance の取得 fallback がほしい
- データセーブモードのときは描画の更新も停止する？いや、新しく描画停止がほしい
  - でも、いずれにせよキャッシュされるから、描画は更新されない。だから、やっぱ描画も停止していいな。
- データセーブモード
- 詳細画面へのリンクを描画の UI に表示したい
- mobile で描画の UI が崩れる問題の修正
- マップクリック → 画像 → 画像を選択 → ここに画像追加ボタンを設置
- 追加した画像の後から修正可能に
- 画像のレイヤーを表示する
- skirk marble の template json を import 対応
- ギャラリー追加時（画像 1 枚目）に座標入力欄の追加
- fix: 明暗の zindex が modal の上に表示される問題
- fix: ダークモードの不足部分

# DONE v1.7.2

- 土地検索https://nominatim.org/ が利用
- tag も export 対象にする
- fix:bookmarks の 🌐 Coordinate Jumper がスクロールしてしまう
- タグ順はアクセスしたタグ順にする
- content.js:1793 🧑‍🎨 : Paint stats: displayed on all color buttons が大量に出ている
- 色 pick に残りピクセル表示しているが、0 のときは非表示にする
- マップピンの上にボタンがあってもいいかも
- ハイコントラスト対応
- よりシンプルなダークテーマ
- お気に入りにタグ設定できるようにした
- 1 チャンクのアーカイブ画像から、特定の色グループのピクセルが何ピクセルあるかカウントする
- paint 画面の色のアイテムに残りピクセル表示
- マップ移動で local ストレージ更新

# DONE v1.6.8

- 複数タイルを取得してマージする機能
- スナップショット詳細画面のボタン一覧は wrap にする
- Chrome 拡張を Safari 拡張に convert、ログをみたところ「Safari は ImageDecoder をサポートしていない」ようだ
  - モバイルで、色の進捗パーセントが表示されない
- リファクタ(DI 化)
- ギャラリーの移動ボタン押したら、modal 閉じる
- カラーフィルターの UI 向上
- ブックマークの UI 向上

# DONE v1.6.5

- 文言調整
- ピクセル文字調整
- 画像サイズ 横 x 縦　で設定可能にする
- 画像編集も GPU/CPU 切り替えしたい
- モバイルの画像詳細の UI 調整
- ディザリングの UI をもっとコンパクトにする
- src/features/gallery/routes/image-editor/canvas-processor.ts の error
- webgl 非対応だと、描画できない
- 画像編集にディザリング追加（ベイヤーディザリング）

# DONE v1.6.0

- Auto color picker は disable にした(コナミコマンドで有効になってしまう)
- 起動が遅い(/me, /tile 取得が間に合っていない場合がある)
- 不要なキャンバス化の処理を削除し、高速化
- フィルターの並び替えまわりのバグ修正
- 画像編集も GPU で高速化
- フィルター並び替えすると、もっかいフィルターボタンが押せない問題
- タイルの jump 機能を bookmark に設置
- パレットのソート順が保持されない
- パレットのソートすると、ソートが押せなくなる
- ブックマーク UI 横並びにする
- 大きな画像が下のタイルにまたがると、表示されない問題
- pixel 計算が累積していたので修正
- 何も描かれていない場所に描画しようとすると、1x1 ピクセルの背景 blob がやってきて、画像が描画されない?
- 描画前の画像を処理してから、保管し、それをタイルに draw する
- 補助色モードでしか、color count されないから、もう統一してしまう。
- カラーフィルターすべて OFF にすると、すべて ON になる
- ブックマークを使った順で並び替え可能にする
- 透過ピクセルの設置がやたら遅くなった?
- マップジャンプは、smooth fly to じゃなくて、map インスタンスを使った即ジャンプも可能にする
- モバイルの bookmark 一覧を 2 行ぐらいにしたい
- ギャラリーのパーセント表示、残りのピクセル数と完成までの時間表示
- sort が most missing のとき、カラーフィルターが押せない
- パレットの進捗別並び替え
- 現在何パーセントの進捗か表示
- 画像は、tile-pixel 指定できるようにする
- 「現在のタイルを保存」ボタンがあふれる
- 位置情報モーダルに座標表示
- サイズの大きい画像を入力したときは、モーダルだして、小さくするか聞く
- 多分気づかないから、カレンダーボタンに文字入れる
- モバイルの表示修正

# DONE v1.5.0

- 言語設定が、初期状態で、chrome の言語になってないきがする
- テキストを描画停止や移動したい
- 「持っている色のみ」の filter
- 入力文字を描画したい
- シェアした画像を読み込んでも、登録されない
- 同じタイルの描画が 9 回も呼ばれている問題がある
- マップをダークテーマに切り替え可能にする

# DONE v1.4.4

- Select image -> image editor -> ここで select image に戻りたい
- 上部のアラートタグが表示されない場合が多い
  - fetch で解決
- 描画しようとしても、No images for drawing.で、画像が表示されない
- 「タイル」の名称が日本語のまま
- タイル描画までのフローが難しい
- タイル一覧もっと広く
- パフォーマンス改善
- enhance 対象が多いと、パフォーマンスが極めて悪くなる
- image editor の画像処理を強化
- color filter の enable all/ disable all を i18n
- スナップショット詳細に削除ボタンあってもいい
- スナップショットの UI 改善
- アイコンを pixel art にする
- ギャラリー画像＋位置を export して、複数人で編集できる機能
  - シェアボタン。tile+pixel の座標表示。lat lng のリンク表示。説明表示
- タイルの import, 時刻が import されてないというより、「ダウンロードした時刻」になっている問題
- 表示中の色を Enhance する
- 現在選択中の色を filter に表示
- image import で color pick
- 画像読み込み時の color filter

# DONE v1.3.0

- notification
- フルチャージまでの時間
- next level までの pixel のバッジ少しわかりにくい

# DONE v1.2.2

- タイルの描画状態は、storage 保存にする
- window.mrWplace?.tileOverlay;のような方式は微妙

# DONE v1.2.1

- レベルアップまでの残りの pixel 数
- skirk marble 相当の機能
  - 描画画像のカラーフィルター

# DONE v1.2.0

- Tile の import 機能
- 言語設定がポルトガル語だと、セレクタが動作しない。おそらく、Title が変化しているため。
- 一度、タイル一覧を表示してしまうと、次以降タイムマシンで前回の位置のスナップショットが表示される
- map 移動モードの option 化
- maplibre-gl のインスタンスを取得する
  - MyLocation ボタンのイベントリスナーからたどることは可能。（　 document.querySelector("div.absolute.bottom-3.right-3.z-30").childNodes[0].\_\_click[3].v 　）
  - "#map"に`__click` はなかった。 getEventListeners($0) で調べることは可能
  - document.querySelector(".maplibregl-canvas")
- goTo は map のインスタンス使えるかも
- selector 失敗したとき用の、予備の UI

# DONE v1.1.0

- 言語変更後に即座に適用
- タイルに名称を設定できると便利
- タイムマシン機能で描画中のタイルを Disable にできない
- タイムスタンプの描画できてない？
- タイルまたぎの描画できてない？
  - おそらく複数描画の影響。描画を整理したほうがいいかもしれない。
  - 描画する候補は、ギャラリーではなく、別の描画用の list を作り、そこで管理する。
- ギャラリーのルーティングができてない
- ある地点のスナップショットを表示（ここにはスナップショットがあり、スナップショット一覧が表示される）　 → 　そして、別のスナップショットがない場所のスナップショット一覧を表示しようとする → 期待する動作：スナップショットがないという表示。実際の動作：前回表示した別の地点のスナップショット一覧が表示される
- 画像エディタに https://pepoafonso.github.io/color_converter_wplace/index.html へのリンク
- src/features/bookmark/import-export.ts の i18n
- お気に入りがない場合の UI が少しずれている
- 現在位置のスナップショットから、id を消し、スナップショットダウンロードする場合のファイル名を変更
- スナップショットの描画が被る場合がある
- 描画中にスナップショットを削除すると、描画がリセットできなくなる問題の修正
- i18n を増やす
